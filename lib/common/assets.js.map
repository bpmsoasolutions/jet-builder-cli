{"version":3,"sources":["../../src/common/assets.js"],"names":["css","output","Promise","resolve","reject","faCss","readFileSync","replace","fontAwesome","args","split","process","argv","slice","length","minize","indexOf","bowerModules","exec","silent","ShellString","to","assets"],"mappings":";;;;;;;yDAMA,iBAA2BA,GAA3B,EAAgCC,MAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACU,mFAAyDA,MAAzD,YADV;;AAAA;AAAA,yDAEW,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAmB;AAClC,gCAAIC,QAAQ,aAAGC,YAAH,CAAgB,qDAAhB,EAAuE,OAAvE,CAAZ;AACAD,oCAAQA,MAAME,OAAN,CAAc,yBAAd,EAAyC,cAAzC,CAAR;;AAEAP,mCAAOK,KAAP;AACAF,oCAAQH,GAAR;AACH,yBANM,CAFX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;oBAAeQ,W;;;;;;0DAWf,kBAAsBC,IAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AACIA,+BAAQA,IAAD,GAASA,KAAKC,KAAL,CAAW,GAAX,CAAT,GAA2BC,QAAQC,IAAR,CAAaC,KAAb,CAAmB,CAAnB,EAAsBF,QAAQC,IAAR,CAAaE,MAAnC,CAAlC;;AAEIb,8BAHR,GAGkBQ,KAAK,CAAL,CAAD,GAAYA,KAAK,CAAL,CAAZ,GAAsB,MAHvC;AAIQM,8BAJR,GAIkBN,KAAKO,OAAL,CAAa,IAAb,IAAqB,CAAC,CAJxC;AAKQC,oCALR,GAKwBR,KAAKO,OAAL,CAAa,iBAAb,IAAkC,CAAC,CAL3D;;AAOI;;AACIhB,2BARR,GAQc,kBAAMkB,IAAN,wBAAyB,eAAKf,OAAL,CAAa,sBAAb,CAAzB,EAAiE,EAACgB,QAAQ,IAAT,EAAjE,CARd;;AAUI;;AAVJ,6BAWQF,YAXR;AAAA;AAAA;AAAA;;AAAA;AAAA,+BAYoBT,YAAYR,GAAZ,EAAiBC,MAAjB,CAZpB;;AAAA;AAYQD,2BAZR;;AAAA;;AAeI,4BAAIe,MAAJ,EAAW;AACP,8CAAMK,WAAN,CAAkBpB,GAAlB,EACKkB,IADL,mBACqB,EAACC,QAAQ,IAAT,EADrB,EAEKE,EAFL,CAEWpB,MAFX;AAGH,yBAJD,MAIO;AACH,8CAAMmB,WAAN,CAAkBpB,GAAlB,EACKqB,EADL,CACWpB,MADX;AAEH;;AAtBL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;oBAAeqB,M;;;;;AAjBf;;;;AACA;;;;AACA;;;;AAEA;;;;;;;;kBAsCeA,M","file":"assets.js","sourcesContent":["import fs from 'fs'\nimport path from 'path'\nimport shell from 'shelljs'\n\nimport run, {pwd, uglifyPwd, sassPwd, copyFolders} from '../index'\n\nasync function fontAwesome(css, output){\n    await run(copyFolders, `src/bower_modules/font-awesome/fonts ${output}/fonts`)\n    return new Promise((resolve, reject)=>{\n        let faCss = fs.readFileSync('src/bower_modules/font-awesome/css/font-awesome.css', 'utf-8')\n        faCss = faCss.replace(/url\\((')?\\.\\.\\/fonts\\//g, 'url($1fonts/')\n\n        css += faCss\n        resolve(css)\n    })\n}\n\nasync function assets(args) {\n    args = (args) ? args.split(' ') : process.argv.slice(3, process.argv.length)\n\n    let output = (args[0]) ? args[0] : 'temp'\n    let minize = (args.indexOf('-m') > -1)\n    let bowerModules = (args.indexOf('--bower-modules') > -1)\n\n    //Parse scss\n    let css = shell.exec(`${sassPwd} ${path.resolve('src/scss/styles.scss')}`, {silent: true})\n\n    //Join css and other assets bower_module tasks\n    if (bowerModules){\n        css = await fontAwesome(css, output)\n    }\n\n    if (minize){\n        shell.ShellString(css)\n            .exec(uglifyPwd, {silent: true})\n            .to(`${output}/styles.css`)\n    } else {\n        shell.ShellString(css)\n            .to(`${output}/styles.css`)\n    }\n}\n\nexport default assets"]}