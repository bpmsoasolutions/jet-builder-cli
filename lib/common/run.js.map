{"version":3,"sources":["../../src/common/run.js"],"names":["format","time","toTimeString","replace","clearLine","process","stdout","cursorTo","run","fn","options","task","default","start","Date","console","log","name","then","end","getTime","resolution"],"mappings":";;;;;;AAAA;;;;;;AAEA,IAAMA,SAAS,SAATA,MAAS,CAAUC,IAAV,EAAgB;AAC3B,WAAOA,KAAKC,YAAL,GAAoBC,OAApB,CAA4B,yBAA5B,EAAuD,IAAvD,CAAP;AACH,CAFD;;AAKA,IAAMC,YAAY,SAAZA,SAAY,GAAW;AAC3B,uBAASA,SAAT,CAAmBC,QAAQC,MAA3B,EAAmC,CAAnC;AACA,uBAASC,QAAT,CAAkBF,QAAQC,MAA1B,EAAkC,CAAlC;AACD,CAHD;;AAKA,IAAME,MAAM,SAANA,GAAM,CAAUC,EAAV,EAAcC,OAAd,EAAuB;AAC/B,QAAMC,OAAO,OAAOF,GAAGG,OAAV,KAAsB,WAAtB,GAAoCH,EAApC,GAAyCA,GAAGG,OAAzD;AACA,QAAMC,QAAQ,IAAIC,IAAJ,EAAd;AACAC,YAAQC,GAAR,OAAgBhB,OAAOa,KAAP,CAAhB,qBAA4CF,KAAKM,IAAjD,IAAwDP,gBAAcA,OAAd,SAA2B,EAAnF;AACA,WAAOC,KAAKD,OAAL,EAAcQ,IAAd,CAAmB,sBAAc;AACpC,YAAMC,MAAM,IAAIL,IAAJ,EAAZ;AACA,YAAMb,OAAOkB,IAAIC,OAAJ,KAAgBP,MAAMO,OAAN,EAA7B;;AAEAhB;AACAW,gBAAQC,GAAR,OAAgBhB,OAAOmB,GAAP,CAAhB,qBAA0CR,KAAKM,IAA/C,IAAsDP,gBAAcA,OAAd,SAA2B,EAAjF,kBAA8FT,IAA9F;AACA,eAAOoB,UAAP;AACH,KAPM,CAAP;AAQH,CAZD;;kBAceb,G","file":"run.js","sourcesContent":["import readline from 'readline'\n\nconst format = function (time) {\n    return time.toTimeString().replace(/.*(\\d{2}:\\d{2}:\\d{2}).*/, '$1')\n}\n\n\nconst clearLine = function() {\n  readline.clearLine(process.stdout, 0)\n  readline.cursorTo(process.stdout, 0)\n}\n\nconst run = function (fn, options) {\n    const task = typeof fn.default === 'undefined' ? fn : fn.default\n    const start = new Date()\n    console.log(`[${format(start)}] Starting '${task.name}${options ? `(${options})` : ''}'...`)\n    return task(options).then(resolution => {\n        const end = new Date()\n        const time = end.getTime() - start.getTime()\n\n        clearLine()\n        console.log(`[${format(end)}] Finished '${task.name}${options ? `(${options})` : ''}' after ${time} ms`)\n        return resolution\n    })\n}\n\nexport default run"]}